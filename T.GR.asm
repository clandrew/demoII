********************************
* DEMOII BY CA *
********************************
* OBJ $6000
 ORG $6000
*
TXTCLR EQU $C050
TXTSET EQU $C051
MIXCLR EQU $C052
LORES EQU $C056
CLRGR EQU $F832
KYBD EQU $C000
TBUFCLR EQU $FC58
CHIRP EQU $C030
WAIT EQU $FCA8
*
 LDA #$00
 STA TXTCLR
 STA MIXCLR
 STA LORES
*
 JSR CLRGR
********************************
*
 JSR DSPAS0
 JSR R8
 JSR R8
*
 JSR DSPAS1
 JSR TN168 ; WE'RE
 JSR TN168
 JSR TN148 ; NO
 JSR TN148
*
 JSR DSPAS0
 JSR TN138 ; STRANG
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ;
*
 JSR DSPAS2 TO
 JSR TN124 ; TO
 JSR TN124 ;
 JSR TN148 ; LOO
 JSR TN148
*
 JSR DSPAS1
 JSR TN148
 JSR TN148
 JSR TN168 ; O
 JSR TN168
*
 JSR DSPAS0 
 JSR TN188 ; VE
 JSR TN188
 JSR R8
*
 JSR DSPAS1
 JSR TN188 ; VE
 JSR TN188
 JSR TN188
 JSR TN188
*
 JSR DSPAS3
 JSR R8
 JSR R8
*
 JSR DSPAS0
 JSR R8
 JSR TN168 ; YOU
 JSR TN168 ; 
*
 JSR DSPAS1
 JSR TN168 ; KNOW
 JSR TN168 ; 
 JSR TN148 ;THE
 JSR TN148
* 
 JSR DSPAS0
 JSR TN138 ; RU
 JSR TN138 ;
 JSR TN168 ;LES
 JSR TN168
*
 JSR DSPAS2
 JSR R8
 JSR TN188 ; AND
 JSR TN188
*
 JSR DSPAS1
 JSR TN94 ; SO 
 JSR TN94 ; 
 JSR TN94 ; 
 JSR TN94 ; 
* 
 JSR DSPAS0
 JSR TN94 ; DO
 JSR TN94 ;
 JSR TN124 ; I
 JSR TN124 ;
*
 JSR DSPAS1
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS3
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS0
 JSR R8
 JSR TN168 ; A
 JSR TN168
*
 JSR DSPAS1
 JSR TN168 ; FULL
 JSR TN168
 JSR TN148 ;COM
 JSR TN148
*
 JSR DSPAS0
 JSR TN138 ; MIT
 JSR TN138 ;
 JSR TN168 ; MENT'S
 JSR TN168
*
 JSR DSPAS2
 JSR TN138 ; WHAT
 JSR TN138 ;
 JSR TN124 ; I'M
 JSR TN124 ;
*
 JSR DSPAS1
 JSR R8
 JSR TN148 ; DREA
 JSR TN148
*
 JSR DSPAS0
 JSR TN168 ; MING
 JSR TN168
 JSR TN188 ; OF
 JSR TN188
*
 JSR DSPAS1
 JSR TN188 ; F
 JSR TN188
 JSR TN188
 JSR TN188
*
 JSR DSPAS3
 JSR R8
 JSR R8
*
 JSR DSPAS0
 JSR R8
 JSR TN168 ; YOU
 JSR TN168
*
 JSR DSPAS1
 JSR TN168 ;
 JSR TN168 ; WOULD
 JSR TN148 ; N'T
 JSR TN148
*
 JSR DSPAS0
 JSR TN138 ; GET
 JSR TN138 ;
 JSR TN168 ; THIS
 JSR TN168
*
 JSR DSPAS2
 JSR TN188 ; FROM
 JSR TN188
 JSR TN188
 JSR TN188
*
 JSR DSPAS1
 JSR TN124 ; ANY
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS0
 JSR TN124 ; O
 JSR TN124 ;
 JSR TN112 ; THER
 JSR TN112
* 
 JSR DSPAS1
 JSR TN124 ; GUY
 JSR TN124 ;
 JSR R8
*
 JSR DSPAS3
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS0
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ; AND
*
 JSR DSPAS1
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ;
* 
 JSR DSPAS0
 JSR TN138 ;
 JSR TN138 ;
 JSR TN124 ; I
 JSR TN124 ;
*
 JSR DSPAS2
 JSR TN112 ; IF
 JSR TN112
 JSR TN138 ; YOU
 JSR TN138 ;
*
 JSR DSPAS1
 JSR TN124 ; ASK ME HOW
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS0
 JSR TN124 
 JSR TN124 
 JSR TN112 ; I'M
 JSR TN112
*
 JSR DSPAS1
 JSR TN124 ; FEE
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS3
 JSR TN188 ; LING
 JSR TN188
 JSR TN188
 JSR TN188
*
 JSR DSPAS0
 JSR R8
 JSR R8
*
 JSR DSPAS1
 JSR R8
 JSR R8
*
 JSR DSPAS0
 JSR TN168 ; GOT
 JSR TN168
 JSR TN148 ; TA
 JSR TN148
*
 JSR DSPAS2
 JSR TN138 ;MAKE
 JSR TN138 ;
 JSR TN168 ; YOU
 JSR TN168
*
 JSR DSPAS1
 JSR R8
 JSR TN124 ; UN
 JSR TN124 ;
*
 JSR DSPAS0
 JSR TN112 ; DER
 JSR TN112
 JSR TN124 ; STAND
 JSR TN124 ;
*
 JSR DSPAS1
 JSR R8
 JSR R8
*
 JSR DSPAS3
 JSR TN188 ; NE
 JSR TN168 ; VER
 JSR TN138 ; GON
 JSR TN168 ; NA
*
 JSR DSPAS0
 JSR TN112 ; GIVE
 JSR TN112
 JSR TN112
 JSR TN112
*
 JSR DSPAS1
 JSR TN112 ; YOU
 JSR TN112
 JSR TN124 ; UP
 JSR TN124 ;
*
 JSR DSPAS0
 JSR R8
 JSR R8
*
 JSR DSPAS2
 JSR TN188 ; NE
 JSR TN168 ; VER
 JSR TN138 ; GON
 JSR TN168 ; NA
*
 JSR DSPAS1
 JSR TN124 ; LET
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS0
 JSR TN124 ; YOU
 JSR TN124 ;
 JSR TN138 ; DOWN
 JSR TN138 ;
*
 JSR DSPAS1
 JSR R8
 JSR R8
*
 JSR DSPAS3
 JSR TN188 ; NE
 JSR TN168 ; VER
 JSR TN138 ; GON
 JSR TN168 ; NA
*
 JSR DSPAS0
 JSR TN138 ; RUN
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ;
*
 JSR DSPAS1
 JSR TN124 ; A
 JSR TN124 ;
 JSR TN148 ; ROUND
 JSR TN148
*
 JSR DSPAS0
 JSR TN148 ;
 JSR TN148
 JSR TN168 ; AND
 JSR TN188 ; DE
*
 JSR DSPAS2
 JSR TN188 ; DE
 JSR TN188
 JSR TN188
 JSR TN188
*
 JSR DSPAS1
 JSR TN124 ; SERT
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS0
 JSR TN138 ; YOU
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ;
*
 JSR DSPAS1
 JSR R8
 JSR R8
*
 JSR DSPAS3
 JSR TN188 ; NE
 JSR TN168 ; VER
 JSR TN138 ; GON
 JSR TN168 ; NA
*
 JSR DSPAS0
 JSR TN112 ; MAKE
 JSR TN112 ;
 JSR TN112 ;
 JSR TN112 ;
*
 JSR DSPAS1
 JSR TN112 ; YOU
 JSR TN112 ;
 JSR TN124 ; CRY
 JSR TN124 ;
*
 JSR DSPAS0
 JSR R8
 JSR R8
*
 JSR DSPAS2
 JSR TN188 ; NE
 JSR TN168 ; VER
 JSR TN138 ; GON
 JSR TN168 ; NA
*
 JSR DSPAS1
 JSR TN94 ; SAY
 JSR TN94
 JSR TN94
 JSR TN94
*
 JSR DSPAS0
 JSR TN148 ; GOOD
 JSR TN148
 JSR TN138 ; BYE
 JSR TN138 ;
*
 JSR DSPAS1
 JSR TN138 ;
 JSR TN148 ; E
 JSR TN168 ; E
 JSR TN168
*
 JSR DSPAS3
 JSR TN188 ; NE
 JSR TN168 ; VER
 JSR TN138 ; GON
 JSR TN168 ; NA
*
 JSR DSPAS0
 JSR TN138 ; TELL
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ;
*
 JSR DSPAS1
 JSR TN124 ;
 JSR TN124 ;
 JSR TN148 ; LIE
 JSR TN148
*
 JSR DSPAS0
 JSR TN148 ;
 JSR TN168 ; E
 JSR TN188 ; E
 JSR TN188
*
 JSR DSPAS2
 JSR TN188 ; AND
 JSR TN188
 JSR TN188
 JSR TN188
*
 JSR DSPAS1
 JSR TN124 ; HURT
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124 ;
*
 JSR DSPAS0
 JSR TN112 ;YOU
 JSR TN112
 JSR TN112
 JSR TN112
*
 JSR DSPAS1
 JSR R8
 JSR TN112
 JSR TN112
*
 JSR DSPAS3
 JSR TN188 ; NE
 JSR TN168 ; VER
 JSR TN138 ; GON
 JSR TN168 ; NA
*
 JSR DSPAS0
 JSR TN138 ; INSTRUMENTAL
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138 ;
*
 JSR DSPAS1
 JSR TN124 ;
 JSR TN124 ;
 JSR TN148 ; 
 JSR TN148
*
 JSR DSPAS0
 JSR TN148 ;
 JSR TN168 ; 
 JSR TN188 ; 
 JSR TN188
*
 JSR DSPAS2
 JSR TN188
 JSR TN188
 JSR TN124 ;
 JSR TN124 ;
 JSR TN124
 JSR TN138 ;
 JSR TN138 ;
 JSR TN138
 JSR TN112
 JSR TN112
 JSR TN112
 JSR TN68
 JSR TN68
 JSR TN68
 JSR TN68

********************************
*
LOOP LDA KYBD
 CMP #$80
 BCC LOOP
 LDA #$00
 STA TXTSET
 JSR TBUFCLR
 RTS ; END MAINLINE
*
********************************
DSPAS0 LDA #<ASTLE0
 STA $EB
 LDA #>ASTLE0
 STA $EC
 JSR FILLIMGFW
 RTS
********************************
DSPAS1 LDA #<ASTLE0
 STA $EB
 LDA #>ASTLE0
 STA $EC
 JSR FILLIMGBK
 RTS
********************************
DSPAS2 LDA #<ASTLE2
 STA $EB
 LDA #>ASTLE2
 STA $EC
 JSR FILLIMGFW
 RTS
********************************
DSPAS3 LDA #<ASTLE2
 STA $EB
 LDA #>ASTLE2
 STA $EC
 JSR FILLIMGBK
 RTS
********************************
* INCIMGBASE
* INCREMENTS IMGBASE BY #$28.
INCIMGBASE LDA $EB
 CLC
 ADC #$28
 STA $EB
 BCC NOCARRY
 INC $EC
NOCARRY RTS
*
********************************
* FILLIMGFW
* REQUIRES ADDRESS OF IMAGE IN EB-EC.
* CLOBBERS EB-EC.
*
FILLIMGFW LDY #$00
*
ROWPAIRFW LDA LORESR0,Y
 STA $E9
 LDA LORESR0+1,Y
 STA $E8
*
 LDX #$00
*
IMGBYTEFW TYA
 PHA
 TXA
 TAY
 LDA ($EB),Y
 STA ($E8),Y
 PLA
 TAY
 INX
 CPX #$28
 BNE IMGBYTEFW
*
 JSR INCIMGBASE
 INY
 INY
 CPY #$30
 BNE ROWPAIRFW
 RTS
*
********************************
* FILLIMGBK
* CLOBBERS EB-EC.
* 
FILLIMGBK LDY #$00
*
ROWPAIRBK LDA LORESR0,Y
 STA $E9
 LDA LORESR0+1,Y
 STA $E8
*
 LDX #$00
*
IMGBYTEBK TYA
 PHA
 TXA
 TAY
 STA $D7 ; STORE IDX0
 LDA ($EB),Y
* 
* GRAB IDX27 AND STORE IN Y
 PHA
 LDA #$27
 SEC
 SBC $D7
 TAY
 PLA
*
 STA ($E8),Y
*
 LDA $D7 ; PUT IDX0 BACK INTO Y
 TAY
*
 PLA
 TAY
 INX
 CPX #$28
 BNE IMGBYTEBK
*
 JSR INCIMGBASE
 INY
 INY
 CPY #$30
 BNE ROWPAIRBK
 RTS

********************************
*
* SOUND CODE MIGHT SEEM JANKY BUT IS VERY SENSITIVE TO TIMINGS.
* I HAVE IT THIS WAY BECAUSE A REFACTOR CAN CAUSE WRONG SOUND
TN188 LDA #188
 STA $06
 LDA #106
 STA $07
 JSR TONE
 RTS
*
TN168 LDA #168
 STA $06
 LDA #118
 STA $07
 JSR TONE
 RTS
*
TN148 LDA #148
 STA $06
 LDA #134
 STA $07
 JSR TONE
 RTS
*
TN138 LDA #138
 STA $06
 LDA #144
 STA $07
 JSR TONE
 RTS
*
TN124 LDA #124
 STA $06
 LDA #160
 STA $07
 JSR TONE
 RTS
*
TN112 LDA #112
 STA $06
 LDA #177
 STA $07
 JSR TONE
 RTS
*
TN94 LDA #94
 STA $06
 LDA #210
 STA $07
 JSR TONE
 RTS
*
TN68 LDA #68
 STA $06
 LDA #211
 STA $07
 JSR TONE
 RTS
*
R8 LDA #136
 JSR WAIT
 JSR WAIT
 RTS
*
TONE LDX $07
DUR LDY $06
 LDA CHIRP
PCH DEY
 BNE PCH
 DEX
 BNE DUR
 RTS
*
ASTLE0 HEX 55555555555555555555557575555575
 HEX 75775775755777757555557575555555
 HEX 55555555555555555555555555557555
 HEX 55577755755555775757557575555757
 HEX 77555575557757555575555555555555
 HEX 55555575757777557777757557555555
 HEX 77557777777755775555555775757777
 HEX 55777775755555555555577777775775
 HEX 77777757755555777585888888888885
 HEX 77555575577777777557777777575555
 HEX 55775555577755777757557757555577
 HEX 88888888888888888855555777555777
 HEX 77557757555577557557757775555557
 HEX 755775755755555788D8DDDDDDDDDDD8
 HEX 88555557757557755755557577755775
 HEX 77755777777755577775575775555555
 HEX D8DDDDDDDDDDDDDD8855557557577577
 HEX 57557777775775777755777777777755
 HEX 5575775577555575DDDDDDDDDDDDDDDD
 HEX DD555577557775555577777777775577
 HEX 57577557775775575555775577555577
 HEX 77DDDDDDDDDDDDDD7755557755775555
 HEX 57755777577557577755755755577555
 HEX 777555757555557757000D0D0D0D0D50
 HEX 77555575755575775575575557755577
 HEX 77557777557777557777555757555505
 HEX F0F0DD5D5D5DFDF00555555757557777
 HEX 55777755777755775755777555757755
 HEX 5705070507200000FFFFFF505555FFFF
 HEX 00000507057755575577755575775557
 HEX 75557557555775052020222222002200
 HEX 2F7755505555775F0020022220000707
 HEX 55755755577555755577777755777700
 HEX 22222202002222222006267655577606
 HEX 00222200222222200077775577777755
 HEX 577777775577770022222220020222D2
 HEX D2220056555606202222220220222222
 HEX 00777755777777577775577577750700
 HEX 2222222222D0DDDDDD22007655760022
 HEX 22220220222222220057757775577577
 HEX 57575557575700002202020200DDDDDD
 HEX DD220056555600222200222222222222
 HEX 00555757575557577755777777550000
 HEX 00202222008D8D0D2222007655560022
 HEX 02202200222222220077557777775577
 HEX 77557777775570202222222220200000
 HEX 22220076555600220022220022222202
 HEX 00775577777755777755777777557700
 HEX 22222222220200222222007655560000
 HEX 202222002202D0DDDDDD557777775577
 HEX 75557575755575700002020200222222
 HEX 2202007655560020222222002200DDDD
 HEX DDDDDD75757555757755777777557777
 HEX 77557777002222222200227655560022
 HEX 222222222000088D8D7D557777775577
 HEX 72557272725572727255720200222222
 HEX 22002272550020222222222202005572
 HEX 72725572727255722222222222222222
 HEX 22222200222222222200222255002222
 HEX 22222202000002222222222222222222
*
ASTLE2 HEX 55555555555555555555557575555575
 HEX 75775775755777757555557575555555
 HEX 55555555555555555555555555557555
 HEX 55577755755555775757557575555757
 HEX 77555575557757555575555555555555
 HEX 55555575757777557777757557555555
 HEX 77558787878785875555555775757777
 HEX 55777775755555555555577777775775
 HEX 77777757755555888888888888888888
 HEX 88855575577777777557777777575555
 HEX 55775555577755777757557757558888
 HEX 888888D8D8D8D8D80858555777555777
 HEX 77557757555577557557757775555557
 HEX 75577575575508888888D8DDDDDDDDDD
 HEX 00555557757557755755557577755775
 HEX 77755777777755577775575775555008
 HEX DDD8DDDDDDDDDDDD0055557557577577
 HEX 57557777775775777755777777777755
 HEX 55757755775555700DDDDDDDDDDDDDDD
 HEX 00555577557775555577777777775577
 HEX 57577557775775575555775577555507
 HEX 00DDDDDDDDDDDD007755557755775555
 HEX 57755777577557577755755755577555
 HEX 77755575750500FFDDDDDDD0D0F00057
 HEX 77555575755575775575575557755577
 HEX 775577775577775577070520200000FF
 HEX FFDDDDDDDDFFF0000505055757557777
 HEX 55777755777755775755777555750720
 HEX 202222220022200F7F7FFFFD7F5F5050
 HEX 52222220057755575577755575775557
 HEX 75557557555700222222020022222222
 HEX 00767676760055555022222200777777
 HEX 55755755577555755577777755002222
 HEX 22222220022222222006767666005555
 HEX 50222222005775557777775577777755
 HEX 57777777052022222222222222200222
 HEX 22007676670022552222002200557755
 HEX 77777755777777577775577500222222
 HEX 22222222222220022220060607002255
 HEX 22220022007577777557757775577577
 HEX 57575507202222222222222222220202
 HEX 00D2DDDDDD0D20552222002220075757
 HEX 57555757575557577755770022222222
 HEX 222020202020222200DDDDDDDD002255
 HEX 22220022220055777777557777775577
 HEX 77557700222222222222222222222222
 HEX 00080D0D600022552202202222222007
 HEX 0707D0D0070705777755777770020202
 HEX 02020020202020202022220007002255
 HEX 220002020202222200DDDDDDDDDD0D00
 HEX 75557575755575757500222222222222
 HEX 22222222007600552200007575705070
 HEX 00080DDDDD0D50757755777777557777
 HEX 77002222222222222222222200060055
 HEX 22005577777755777777557070775577
 HEX 72557272725572727200222222222222
 HEX 22222222005500552250057272725572
 HEX 72725572727255722222222222222222
 HEX 22002222222222222222222200550055
 HEX 22220022222222222222222222222222
*
LORESR0 HEX 0400
 HEX 0480
 HEX 0500
 HEX 0580
 HEX 0600
 HEX 0680
 HEX 0700
 HEX 0780
 HEX 0428
 HEX 04A8
 HEX 0528
 HEX 05A8
 HEX 0628
 HEX 06A8
 HEX 0728
 HEX 07A8
 HEX 0450
 HEX 04D0
 HEX 0550
 HEX 05D0
 HEX 0650
 HEX 06D0
 HEX 0750
 HEX 07D0
